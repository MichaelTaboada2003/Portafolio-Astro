---
import Layout from "../layouts/Layout.astro";
import SectionContainer from "../components/SectionContainer.astro";
import { getAllProjects } from "../data/projects";
import GithubIcon from "../icons/GithubIcon.astro";
import ProjectIcon from "../icons/ProjectIcon.astro";

const ALL_PROJECTS = getAllProjects();
---

<Layout title="Proyectos - Michael Taboada">
    <main class="px-4 py-14 md:py-24">
        <SectionContainer>
            <!-- Header -->
            <div class="page-header">
                <a href="/" class="back-link">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                        class="back-icon"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <span>Volver al inicio</span>
                </a>

                <h1 class="page-title">
                    <ProjectIcon class="title-icon" />
                    <span>Todos mis proyectos</span>
                </h1>
                <p class="page-subtitle">
                    Una colección de proyectos personales, académicos y
                    profesionales que he desarrollado a lo largo de mi carrera.
                </p>
            </div>

            <!-- Projects Grid -->
            <div class="projects-grid">
                {
                    ALL_PROJECTS.map(
                        ({
                            image,
                            title,
                            description,
                            tags,
                            github,
                            preview,
                            featured,
                        }) => (
                            <article
                                class={`project-card ${featured ? "featured" : ""}`}
                            >
                                <div class="project-image-wrapper">
                                    <img
                                        src={image}
                                        alt={`Captura de pantalla de ${title}`}
                                        class="project-image"
                                        loading="lazy"
                                    />
                                    {featured && (
                                        <div class="featured-badge">
                                            <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                viewBox="0 0 20 20"
                                                fill="currentColor"
                                                class="star-icon"
                                            >
                                                <path
                                                    fill-rule="evenodd"
                                                    d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401z"
                                                    clip-rule="evenodd"
                                                />
                                            </svg>
                                            <span>Destacado</span>
                                        </div>
                                    )}
                                    <div class="image-overlay" />
                                </div>

                                <div class="project-content">
                                    <h3 class="project-title">{title}</h3>

                                    <ul class="project-tags">
                                        {tags.slice(0, 3).map((tag) => (
                                            <li>
                                                <span
                                                    class={`project-tag ${tag.class}`}
                                                >
                                                    {tag.icon && (
                                                        <tag.icon class="tag-icon" />
                                                    )}
                                                    {tag.name}
                                                </span>
                                            </li>
                                        ))}
                                        {tags.length > 3 && (
                                            <li>
                                                <span class="project-tag more-tag">
                                                    +{tags.length - 3}
                                                </span>
                                            </li>
                                        )}
                                    </ul>

                                    <p class="project-description">
                                        {description}
                                    </p>

                                    <div class="project-links">
                                        {github && (
                                            <a
                                                href={github}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                class="project-link"
                                            >
                                                <GithubIcon class="link-icon" />
                                                <span>Code</span>
                                            </a>
                                        )}
                                        {preview && (
                                            <a
                                                href={preview}
                                                target="_blank"
                                                rel="noopener noreferrer"
                                                class="project-link project-link-preview"
                                            >
                                                <svg
                                                    class="link-icon"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 20 20"
                                                    fill="currentColor"
                                                >
                                                    <path d="M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.667l3-3z" />
                                                    <path d="M11.603 7.963a.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.667l-3 3a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 105.656 5.656l3-3a4 4 0 00-.225-5.865z" />
                                                </svg>
                                                <span>Preview</span>
                                            </a>
                                        )}
                                    </div>
                                </div>
                            </article>
                        ),
                    )
                }
            </div>
        </SectionContainer>
    </main>
</Layout>

<style>
    /* Page Header */
    .page-header {
        margin-bottom: 3rem;
    }

    .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: rgba(255, 255, 255, 0.6);
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        margin-bottom: 1.5rem;
        transition: all 0.2s ease;
    }

    .back-link:hover {
        color: #fbbf24;
    }

    .back-icon {
        width: 1.1rem;
        height: 1.1rem;
        transition: transform 0.2s ease;
    }

    .back-link:hover .back-icon {
        transform: translateX(-4px);
    }

    .page-title {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 2.5rem;
        font-weight: 800;
        color: white;
        margin: 0 0 1rem 0;
    }

    .title-icon {
        width: 2rem;
        height: 2rem;
        color: #fbbf24;
    }

    .page-subtitle {
        font-size: 1.1rem;
        color: rgba(209, 213, 219, 0.8);
        max-width: 600px;
        line-height: 1.6;
        margin: 0;
    }

    /* Projects Grid */
    .projects-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
    }

    @media (min-width: 768px) {
        .projects-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (min-width: 1024px) {
        .projects-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    /* Project Card */
    .project-card {
        display: flex;
        flex-direction: column;
        background: linear-gradient(
            135deg,
            rgba(255, 255, 255, 0.03) 0%,
            rgba(255, 255, 255, 0.01) 100%
        );
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .project-card:hover {
        transform: translateY(-8px);
        border-color: rgba(251, 191, 36, 0.2);
        box-shadow:
            0 20px 40px -15px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(251, 191, 36, 0.1);
    }

    .project-card.featured {
        border-color: rgba(251, 191, 36, 0.15);
    }

    /* Image */
    .project-image-wrapper {
        position: relative;
        overflow: hidden;
        aspect-ratio: 16/10;
    }

    .project-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .project-card:hover .project-image {
        transform: scale(1.08);
    }

    .image-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(
            180deg,
            transparent 50%,
            rgba(0, 0, 0, 0.3) 100%
        );
        pointer-events: none;
    }

    .featured-badge {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.35rem 0.75rem;
        background: rgba(251, 191, 36, 0.9);
        color: #000;
        font-size: 0.75rem;
        font-weight: 700;
        border-radius: 50px;
        z-index: 10;
    }

    .star-icon {
        width: 0.9rem;
        height: 0.9rem;
    }

    /* Content */
    .project-content {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding: 1.25rem;
        flex: 1;
    }

    .project-title {
        font-size: 1.15rem;
        font-weight: 700;
        color: white;
        margin: 0;
        line-height: 1.3;
    }

    /* Tags */
    .project-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .project-tag {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        padding: 0.25rem 0.6rem;
        font-size: 0.7rem;
        font-weight: 600;
        border-radius: 50px;
        border: 1px solid;
    }

    .tag-icon {
        width: 0.8rem;
        height: 0.8rem;
    }

    .more-tag {
        background: rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.7);
        border-color: rgba(255, 255, 255, 0.2);
    }

    /* Description */
    .project-description {
        font-size: 0.9rem;
        line-height: 1.6;
        color: rgba(209, 213, 219, 0.8);
        margin: 0;
        flex: 1;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Links */
    .project-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: auto;
        padding-top: 0.5rem;
    }

    .project-link {
        display: inline-flex;
        align-items: center;
        gap: 0.4rem;
        padding: 0.5rem 1rem;
        font-size: 0.8rem;
        font-weight: 600;
        color: white;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .project-link:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.25);
    }

    .project-link-preview {
        background: rgba(251, 191, 36, 0.1);
        border-color: rgba(251, 191, 36, 0.3);
        color: #fbbf24;
    }

    .project-link-preview:hover {
        background: rgba(251, 191, 36, 0.2);
        border-color: rgba(251, 191, 36, 0.5);
    }

    .link-icon {
        width: 1rem;
        height: 1rem;
    }
</style>
