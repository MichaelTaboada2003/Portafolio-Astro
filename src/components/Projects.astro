---
import { getFeaturedProjects, TAGS } from '../data/projects';
import GithubIcon from '../icons/GithubIcon.astro';

const FEATURED_PROJECTS = getFeaturedProjects();
---

<div class="projects-container">
    {FEATURED_PROJECTS.map(({ image, title, description, tags, github, preview }) => (
        <article class="project-card">
            <!-- Image Section -->
            <div class="project-image-container">
                <a href={preview || github} target="_blank" rel="noopener noreferrer" class="image-link">
                    <img 
                        src={image} 
                        alt={`Captura de pantalla de ${title}`}
                        class="project-image"
                        loading="lazy"
                    />
                </a>
            </div>

            <!-- Content Section -->
            <div class="project-content">
                <h3 class="project-title">{title}</h3>
                
                <ul class="project-tags">
                    {tags.map((tag) => (
                        <li>
                            <span class={`project-tag ${tag.class}`}>
                                {tag.icon && <tag.icon class="tag-icon" />}
                                {tag.name}
                            </span>
                        </li>
                    ))}
                </ul>

                <p class="project-description">{description}</p>

                <div class="project-links">
                    {github && (
                        <a href={github} target="_blank" rel="noopener noreferrer" class="project-link">
                            <GithubIcon class="link-icon" />
                            <span>Code</span>
                        </a>
                    )}
                    {preview && (
                        <a href={preview} target="_blank" rel="noopener noreferrer" class="project-link">
                            <svg class="link-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.667l3-3z"/>
                                <path d="M11.603 7.963a.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.667l-3 3a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 105.656 5.656l3-3a4 4 0 00-.225-5.865z"/>
                            </svg>
                            <span>Preview</span>
                        </a>
                    )}
                </div>
            </div>
        </article>
    ))}

    <!-- View More Button -->
    <div class="view-more-container">
        <a href="/proyectos" class="view-more-btn">
            <span>Ver todos los proyectos</span>
            <svg class="view-more-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z" clip-rule="evenodd"/>
            </svg>
        </a>
    </div>
</div>

<style>
    .projects-container {
        display: flex;
        flex-direction: column;
        gap: 3rem;
    }

    .project-card {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1.5rem;
        align-items: start;
    }

    @media (min-width: 768px) {
        .project-card {
            grid-template-columns: 1fr 1fr;
            gap: 2.5rem;
        }
    }

    /* Image Section */
    .project-image-container {
        position: relative;
    }

    .image-link {
        display: block;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 
            0 10px 30px -10px rgba(0, 0, 0, 0.4),
            0 0 0 1px rgba(255, 255, 255, 0.05);
        transition: all 0.3s ease;
    }

    .image-link:hover {
        box-shadow: 
            0 15px 40px -10px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(255, 255, 255, 0.1);
        transform: translateY(-4px);
    }

    .project-image {
        width: 100%;
        height: auto;
        display: block;
        transition: transform 0.4s ease;
    }

    .image-link:hover .project-image {
        transform: scale(1.02);
    }

    /* Content Section */
    .project-content {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .project-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0;
        line-height: 1.3;
        background: linear-gradient(135deg, #ffffff 0%, #fde047 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    @media (min-width: 768px) {
        .project-title {
            font-size: 1.75rem;
        }
    }

    /* Tags */
    .project-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .project-tag {
        display: inline-flex;
        align-items: center;
        gap: 0.35rem;
        padding: 0.4rem 0.85rem;
        font-size: 0.8rem;
        font-weight: 600;
        border-radius: 50px;
        transition: all 0.2s ease;
    }

    .project-tag:hover {
        transform: translateY(-1px);
    }

    .tag-icon {
        width: 0.9rem;
        height: 0.9rem;
    }

    /* Description */
    .project-description {
        font-size: 1rem;
        line-height: 1.7;
        color: rgba(209, 213, 219, 0.9);
        margin: 0;
    }

    /* Links */
    .project-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: 0.5rem;
    }

    .project-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.65rem 1.25rem;
        font-size: 0.9rem;
        font-weight: 600;
        color: white;
        background: transparent;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
    }

    .project-link:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(255, 255, 255, 0.35);
    }

    .link-icon {
        width: 1.1rem;
        height: 1.1rem;
    }

    /* View More Button */
    .view-more-container {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
    }

    .view-more-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem 2rem;
        font-size: 1rem;
        font-weight: 600;
        color: #fbbf24;
        background: linear-gradient(
            135deg,
            rgba(251, 191, 36, 0.1) 0%,
            rgba(251, 191, 36, 0.05) 100%
        );
        border: 1px solid rgba(251, 191, 36, 0.3);
        border-radius: 12px;
        text-decoration: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
    }

    .view-more-btn::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(
            135deg,
            rgba(251, 191, 36, 0.2) 0%,
            rgba(251, 191, 36, 0.1) 100%
        );
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .view-more-btn:hover {
        transform: translateY(-3px);
        border-color: rgba(251, 191, 36, 0.5);
        box-shadow: 
            0 10px 30px -10px rgba(251, 191, 36, 0.3),
            0 0 0 1px rgba(251, 191, 36, 0.1);
    }

    .view-more-btn:hover::before {
        opacity: 1;
    }

    .view-more-btn span,
    .view-more-btn svg {
        position: relative;
        z-index: 1;
    }

    .view-more-icon {
        width: 1.25rem;
        height: 1.25rem;
        transition: transform 0.3s ease;
    }

    .view-more-btn:hover .view-more-icon {
        transform: translateX(4px);
    }
</style>